<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <script src="CalendarLogic.js"></script>
  <title>CEN 100 Assignment Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    
:root {
  --page-bg: #fff;    
  --main-bg: #fff;    
  --header-bg: #a009d7;
  --header-title: #ffffff;
  --image-bg: #7a07a8;
  --sidebar-bg: #eceaea;     
  --sidebar-title: #fff;
  --sidebar-btn-bg: #a009d7;
  --sidebar-btn-hover: #7a07a8;
  --sidebar-btn-library: #952335;
  --sidebar-btn-data: #1b537a;
  --sidebar-btn-it: #6b184a;
  --sidebar-btn-learning: #f6bc16;
  --sidebar-btn-learning-text: #222;
  --sidebar-btn-disabilities: #566b3b;
  --sidebar-btn-graduate: #a05a18;
  --form-label: #fff;
  --form-bg: #b97fdc;
  --form-header-bg: #b97fdc;
  --form-header-hover: #a96acb;
  --form-content-bg: #f7f7fa;
  --form-content-text: #222;
  --deadline-warning-bg: #d7263d;
  --deadline-warning-text: #fff;
  --logo-bg-column: #e7ecff; 
  --announcement-bg: rgba(160, 9, 215, 0.97);
  --announcement-text: #fff;
}

/* Enforce a single, consistent UI font across the app */
html, body, h1, h2, h3, h4, h5, h6,
button, input, select, textarea, a, span, div, p, li,
.header, .title, .main-header-bar, .main-header-title,
.sidebar, .sidebar-group, .sidebar-group-title, .sidebar-btn-new,
.right-support-group, .right-support-title, .right-btn,
.center-welcome-container, .center-welcome-title, .center-welcome-desc,
.center-form-card, .calendar-preview, .calendar-title, .warning-box,
.step-header, .step-content, .footer-text {
  font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* normalize weight a bit to match screenshot */
  font-weight: 500 !important;
  line-height: 1.25 !important;
}
/* keep heavy titles bolder when specifically set elsewhere */
.title, .main-header-title, .center-welcome-title, .sidebar-group-title {
  font-weight: 700 !important;
}

body {
  background: var(--main-bg); 
  padding-top: 80px !important;
}

.header {
  background: var(--header-bg);
}

.title {
  color: var(--header-title);
}

.image-container {
  background: var(--image-bg);
}

.sidebar {
  width: 260px;
  padding-top: 8px;
  padding-bottom: 16px;
  min-height: 0;
  max-height: calc(100vh - 80px); /* Subtract header height */
  background: #1b3698;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: -2px 0 16px rgba(80,0,120,0.08);
  position: fixed;
  left: 0;
  top: 80px; /* Push below header */
  z-index: 100;
  overflow-y: auto;
  overscroll-behavior: contain;
}

.sidebar-title {
  color: var(--sidebar-title);
}

.sidebar-btn {
  background: var(--sidebar-btn-bg);
  color: var(--sidebar-title);
}
.sidebar-btn.library { background: var(--sidebar-btn-library); }
.sidebar-btn.data { background: var(--sidebar-btn-data); }
.sidebar-btn.it { background: var(--sidebar-btn-it); }
.sidebar-btn.learning { background: var(--sidebar-btn-learning); color: var(--sidebar-btn-learning-text); }
.sidebar-btn.disabilities { background: var(--sidebar-btn-disabilities); }
.sidebar-btn.graduate { background: var(--sidebar-btn-graduate); }
.sidebar-btn:hover {
  background: var(--sidebar-btn-hover);
}

.form-row label {
  color: var(--form-label);
}

.step-accordion {
  background: var(--form-bg);
}
.step-header {
  background: var(--form-header-bg);
  color: var(--form-label);
}
.step-header:hover {
  background: var(--form-header-hover);
}
.step-content {
  background: var(--form-content-bg);
  color: var(--form-content-text);
}

#deadline-warning {
  background: var(--deadline-warning-bg);
  color: var (--deadline-warning-text);
}

.logo-bg-column {
  background: var(--logo-bg-column);
}

.announcement-overlay {
  background: var(--announcement-bg);
  color: var(--announcement-text);
}


body.dark-mode {
  --page-bg: #181828;           
  --sidebar-bg: #181c2f;        
  --logo-bg-column: #181828;   
  --header-bg: #2e1b4b;            
  --header-title: #f3eaff;
  --image-bg: #2d1e3a;
  --sidebar-title: #f3eaff;
  --sidebar-btn-bg: #32204a;
  --sidebar-btn-hover: #4c2e6a;
  --sidebar-btn-library: #952335;
  --sidebar-btn-data: #1b537a;
  --sidebar-btn-it: #6b184a;
  --sidebar-btn-learning: #f6bc16;
  --sidebar-btn-learning-text: #222;
  --sidebar-btn-disabilities: #566b3b;
  --sidebar-btn-graduate: #a05a18;
  --form-label: #f3eaff;
  --form-bg: #2a1c38;              /* Main calculator lavender background (was #3d2a5c) */
  --form-header-bg: #2a1c38;
  --form-header-hover: #3a2950;
  --form-content-bg: #23213a;
  --form-content-text: #e5e5f7;
  --deadline-warning-bg: #d7263d;
  --deadline-warning-text: #fff;
  --announcement-bg: #3d2a5c;
  --announcement-text: #fff;
}

    body {
      background: var(--main-bg);
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      position: relative;
      padding-top: 80px !important; 
    }
    .main-content {
      margin-left: auto !important;
      margin-right: auto !important;
      /* Remove or override any fixed margin-left/margin-right */
      width: 100%;
      max-width: 1100px;
      box-sizing: border-box;
      margin-top: 32px;
      background: var(--main-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    @media (max-width: 1100px) {
      .main-content {
        margin-left: auto !important;
        margin-right: auto !important;
        max-width: 100vw;
        padding: 0 2vw;
      }
    }
    @media (max-width: 900px) {
      .main-content {
        margin-left: auto !important;
        margin-right: auto !important;
        max-width: 100vw;
        padding: 0 2vw;
        align-items: center;
      }
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #a009d7; /* Match FYEO logo purple */
      border-radius: 20px;
      padding: 24px 48px 24px 24px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.12);
      margin-bottom: 48px;
      position: static;
      min-width: 700px;
      margin-top: 48px;
      align-self: center;
      background: var(--form-bg);
    }
    .logo {
      width: 180px;
      height: 112px;
      border-radius: 12px;
      margin-right: 40px;
      background: transparent;
      box-shadow: none;
      padding: 0;
    }
    .title {
      font-size: 4em;
      color: #ffffff;
      font-weight: bold;
      letter-spacing: 1.5px;
      font-family: 'Segoe UI', Arial, sans-serif;
      text-shadow: 0 2px 8px rgba(80,80,120,0.12);
      line-height: 1.1;
    }

    .image-container {
      width: 100%;
      max-width: 700px; /* Match header width */
      font-family: 'Segoe UI', Arial, sans-serif;
      height: auto;
      background: #7a07a8;
      border-radius: 20px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 40px auto 0 auto; /* Center horizontally, add top margin */
      padding: 32px 0; /* Add vertical padding for better appearance */
      background: var(--form-bg);
    }
    .sidebar {
      width: 260px;
      padding-top: 8px;
      padding-bottom: 16px;
      min-height: 0;
      max-height: calc(100vh - 80px); /* Subtract header height */
      background: #1b3698;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: -2px 0 16px rgba(80,0,120,0.08);
      position: fixed;
      left: 0;
      top: 80px; /* Push below header */
      z-index: 100;
      overflow-y: auto;
      overscroll-behavior: contain;
    }
    .sidebar-title {
      color: #fff;
      font-size: 2.2em;
      font-weight: bold;
      margin-bottom: 18px;
      font-family: 'Segoe UI', Arial, sans-serif;
      letter-spacing: 1px;
      text-align: center;
    }
    .sidebar-btn {
      width: 90%;
      margin: 10px 0;
      padding: 14px 0;
      background: #a009d7;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 1.1em;
      font-family: 'Segoe UI', Arial, sans-serif;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      box-shadow: 0 2px 8px rgba(80,0,120,0.08);
    }
    .sidebar-btn:hover {
      background: #7a07a8;
      transform: translateY(-2px) scale(1.03);
    }
    @media (max-width: 1100px) {
      .main-content {
        margin-left: 0;
        margin-right: 0;
        max-width: 100vw;
        padding: 0 2vw;
      }
      .center-form-card {
        max-width: 98vw;
        padding: 18px 2vw;
      }
    }
    @media (max-width: 900px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        position: static;
        width: 100vw;
        min-height: unset;
        max-height: unset;         /* Add this line */
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        padding: 12px 0 0 0;
        box-shadow: none;
        overflow-y: visible;       /* Add this line */
      }
      .sidebar-title {
        font-size: 1.3em;
        margin-bottom: 8px;
      }
      .sidebar-btn {
        width: 90vw;
        max-width: 300px;
        margin: 6px 4vw;
        font-size: 1em;
      }
      .main-content {
        margin-left: 0;
        margin-right: 0;
        max-width: 100vw;
        padding: 0 2vw;
        align-items: center;
      }
      .center-form-card {
        flex-direction: column;
        gap: 18px;
        padding: 18px 2vw;
        max-width: 100vw;
      }
      .center-welcome-container {
        max-width: 98vw;
        padding: 0 2vw;
      }
    }
    @media (max-width: 600px) {
      .main-content {
        padding: 0 1vw;
      }
      .center-form-card,
      .center-welcome-container {
        padding: 0 1vw;
        max-width: 100vw;
      }
    }
    .main-content {
      margin-right: 280px; /* space for sidebar */
      background: var(--main-bg) !important; /* this will now be white */
    }
    @media (max-width: 900px) {
      .main-content {
        margin-right: 0;
      }
    }
    .logo-btn {
      cursor: pointer;
      transition: box-shadow 0.2s, transform 0.2s, border 0.2s;
      border: 3px solid transparent;
    }
    .logo-btn:active {
      transform: scale(0.96);
      box-shadow: 0 0 0 2px #fff, 0 2px 12px rgba(80,0,120,0.18);
      border: 3px solid #fff;
    }
    .logo-btn:hover, .logo-btn:focus {
      box-shadow: 0 0 0 3px #fff, 0 4px 16px rgba(80,0,120,0.18);
      border: 3px solid #fff;
      outline: none;
    }

    /* Fade and slide-in animation */
    .slide-fade {
      opacity: 0;
      transform: translateY(40px);
      animation: slideFadeIn 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    }
    /* Staggered animation for children */
    .slide-fade.delay-1 { animation-delay: 0.15s; }
    .slide-fade.delay-2 { animation-delay: 0.3s; }
    .slide-fade.delay-3 { animation-delay: 0.45s; }
    .slide-fade.delay-4 { animation-delay: 0.6s; }
    .slide-fade.delay-5 { animation-delay: 0.75s; }
    .slide-fade.delay-6 { animation-delay: 0.9s; }

    @keyframes slideFadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .announcement-overlay {
      position: absolute;
      left: 24px;
      top: 158px; /* Adjusted from 155px to 145px */
      min-width: 260px;
      max-width: 340px;
      background: rgba(160, 9, 215, 0.97);
      color: #fff;
      font-family: 'Segoe UI', Arial, sans-serif;
      font-size: 1.08em;
      border-radius: 10px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.13);
      padding: 11px 18px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.35s cubic-bezier(0.23, 1, 0.32, 1);
      z-index: 10;
      margin-top: 8px;
      display: block;
    }

    /* Show overlay on logo hover */
    .header:hover #announcement-overlay,
    #fyeo-logo:focus + #announcement-overlay {
      opacity: 1;
      pointer-events: auto;
    }
.fyeo-logo-block {
  background: #a009d7;
  border-radius: 22px;
  padding: 28px 22px;
  box-shadow: 0 4px 18px rgba(80,0,120,0.13);
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 180px;
  min-height: 110px;
  max-width: 260px;
  max-height: 160px;
  z-index: 200;
  margin: 0;
}

.content-row {
  display: flex;
  flex-direction: row;
  justify-content: center; /* Center children horizontally */
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
}
.sidebar-btn.library { background: #952335; }
.sidebar-btn.data { background: #1b537a; }
.sidebar-btn.it { background: #6b184a; }
.sidebar-btn.learning { background: #f6bc16; color: #222; }
.sidebar-btn.disabilities { background: #566b3b; }
.sidebar-btn.graduate { background: #a05a18; }
/* Optional: keep hover effect for all */
.sidebar-btn:hover {
  filter: brightness(0.93);
  transform: translateY(-2px) scale(1.03);
}
.form-row {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: 90%;
  max-width: 540px; /* Slightly wider for more space */
  margin: 0 0 22px 48px;
  flex-wrap: nowrap;
}

.form-row label {
  color: white;
  font-size: 1.2em;
  min-width: 220px;   /* Increased for more space */
  max-width: 220px;
  margin-right: 18px;
  text-align: right;
  font-family: 'Segoe UI', Arial, sans-serif;
  flex-shrink: 0;
  white-space: nowrap;
}

.form-row select,
.form-row input[type="date"] {
  width: 260px;       /* Reduced so it doesn't clip */
  padding: 8px;
  border-radius: 6px;
  border: none;
  font-size: 1em;
  box-sizing: border-box;
}

#calculate-btn {
  margin-top: 24px;
  width: 90%;
  max-width: 300px;
  padding: 12px 0;
  background: #a009d7;
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 1.2em;
  font-family: 'Segoe UI',Arial,sans-serif;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.step-accordion {
  width: 100%;
  margin-bottom: 12px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(80,0,120,0.08);
  background: #b97fdc; /* lighter purple */
  background: var(--form-bg);
}

.step-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #b97fdc; /* lighter purple */
  color: #fff;
  font-size: 1.18em;
  font-weight: bold;
  padding: 16px 22px;
  cursor: pointer;
  border: none;
  outline: none;
  width: 100%;
  transition: background 0.2s;
}

.step-header:hover {
  background: #a96acb; /* slightly darker on hover */
}

.step-icon {
  font-size: 1.3em;
  margin-left: 18px;
  transition: transform 0.2s;
}

.step-accordion.open .step-icon {
  transform: rotate(90deg);
}

.step-content {
  background: #f7f7fa;
  color: #222;
  font-size: 1em;
  padding: 18px 22px;
  border-top: 1px solid #e0e0e0;
  display: none;
}

.step-accordion.open .step-content {
  display: block;
}
.logo-bg-column {
  position: fixed;
  top: 80px; /* below header */
  right: 0;
  left: auto;
  width: 300px;
  height: calc(100vh - 90px); /* slightly less than full height */
  background: #e7ecff;
  z-index: 50;
  border-left: 1px solid #e0e0e0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding-top: 16px;
  padding-bottom: 16px; /* add bottom padding */
  overflow-y: auto; /* enable vertical scroll */
  overflow-x: hidden;
}
@media (max-width: 900px) {
  .logo-bg-column {
    display: none;
  }
}

/* Make the mode toggle clickable even inside .logo_bg_column */
#mode-toggle {
  pointer-events: auto;
  z-index: 1000;
}

/* Overwrite ONLY the three columns for dark mode */
body.dark-mode {
  /* Overwrite ONLY the three columns for dark mode */
  --sidebar-bg: #181c2f !important;     /* Sidebar: dark navy */
  --main-bg: #23213a !important;        /* Main: dark grayish purple */
  --logo-bg-column: #181828 !important; /* Right column: dark */
}

/* Ensure these classes use the variables */
.sidebar {
  background: var(--sidebar-bg) !important;
}
.main-content {
  background: var(--main-bg) !important;
}
.logo-bg-column {
  background: var(--logo-bg-column) !important;
}
body.dark-mode .logo-bg-column {
  border-left: 1px solid #23213a; /* Match dark background or set to transparent */
}
.fyeo-announcements {
  margin-top: 38px;
  width: 210px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(80,0,120,0.10);
  padding: 16px 16px 12px 16px;
  font-family: 'Segoe UI', Arial, sans-serif;
  color: #222;
  text-align: left;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.fyeo-announcements-title {
  font-size: 1.15em;
  font-weight: bold;
  margin-bottom: 8px;
  color: #a009d7;
}

.fyeo-announcements-content {
  font-size: 1em;
  color: #333;
}

/* Dark mode for announcements block */
body.dark-mode .fyeo-announcements {
  background: #23213a;
  color: #f3eaff;
  box-shadow: 0 2px 8px rgba(30,0,40,0.18);
}
body.dark-mode .fyeo-announcements-title {
  color: #b97fdc;
}
body.dark-mode .fyeo-announcements-content {
  color: #e5e5f7;
}

/* --- New Sidebar Redesign --- */
.sidebar-group {
  background: #7a7fdc;
  border-radius: 18px;
  padding: 18px 14px 18px 14px;
  margin-bottom: 28px;
  width: 94%;
  box-shadow: 0 2px 8px rgba(80,0,120,0.10);
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
.sidebar-group-title {
  font-size: 1.35em;
  font-weight: bold;
  color: #fff;
  margin-bottom: 12px;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.sidebar-group-title .emoji {
  font-size: 1.1em;
}
.sidebar-btn-new {
  width: 100%;
  margin: 7px 0;
  padding: 13px 0;
  border: none;
  border-radius: 8px;
  font-size: 1.08em;
  font-family: 'Segoe UI', Arial, sans-serif;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.18s, color 0.18s, transform 0.18s;
  box-shadow: 0 1px 4px rgba(80,0,120,0.07);
  text-align: center;
  outline: none;
}
.sidebar-btn-yellow {
  background: #ffe14d;
  color: #222;
}
.sidebar-btn-yellow:hover {
  background: #ffe97a;
}
.sidebar-btn-blue {
  background: #1857b8;
  color: #fff;
}
.sidebar-btn-blue:hover {
  background: #2d6fd3;
}
.sidebar-btn-darkblue {
  background: #1b3698;
  color: #fff;
}
.sidebar-btn-darkblue:hover {
  background: #2747b8;
}
.sidebar-btn-purple {
  background: #7a7fdc;
  color: #fff;
}
.sidebar-btn-purple:hover {
  background: #a09be0;
}
@media (max-width: 900px) {
  .sidebar-group {
    width: 98vw;
    max-width: 340px;
    margin: 0 auto 18px auto;
  }
}

/* --- Right Column Support Groups --- */
.right-support-group {
  background: #fff;
  border-radius: 12px; /* reduced */
  box-shadow: 0 2px 8px rgba(80,0,120,0.10);
  padding: 14px 8px 10px 8px; /* reduced */
  margin-bottom: 16px; /* reduced */
  width: 92%; /* slightly smaller */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

.right-support-title {
  font-size: 1.1em; /* reduced */
  font-weight: bold;
  color: #222;
  margin-bottom: 10px; /* reduced */
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: 'Segoe UI', Arial, sans-serif;
  text-align: left;
}

.right-support-title .emoji {
  font-size: 1em; /* reduced */
}

.right-btn {
  width: 100%;
  margin: 5px 0; /* reduced */
  padding: 8px 0; /* reduced */
  border: none;
  border-radius: 7px; /* reduced */
  font-size: 0.98em; /* reduced */
  font-family: 'Segoe UI', Arial, sans-serif;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.18s, color 0.18s, transform 0.18s;
  box-shadow: 0 1px 4px rgba(80,0,120,0.07);
  text-align: center;
  outline: none;
}

.right-btn-yellow {
  background: #ffe14d;
  color: #222;
}
.right-btn-yellow:hover {
  background: #ffe97a;
}

.right-btn-blue {
  background: #1857b8;
  color: #fff;
}
.right-btn-blue:hover {
  background: #2d6fd3;
}

.right-fyeo-footer {
  margin-top: 32px;
  width: 90%;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 12px;
}
.footer-bar {
  display: inline-block;
  width: 6px;
  height: 56px;
  background: #222;
  border-radius: 3px;
  margin-top: 4px;
}
.footer-text {
  font-size: 1.55em;
  font-weight: bold;
  color: #222;
  font-family: 'Segoe UI', Arial, sans-serif;
  line-height: 1.1;
  margin-left: 8px;
  margin-top: 0;
  letter-spacing: 0.5px;
  text-align: left;
  display: inline-block;
}
.main-header-bar {
  width: 100vw;
  background: #8a24a8;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 28px 32px 28px 28px;
  box-sizing: border-box;
  box-shadow: 0 2px 12px rgba(60,0,60,0.13);
  z-index: 3000; /* Make sure this is higher than any other element */
  position: fixed;
  top: 0;
  left: 0;
  height: 80px;
}

.main-header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.main-header-icon {
  display: flex;
  align-items: center;
  margin-right: 10px;
}

.main-header-title {
  color: #fff;
  font-size: 2.1em;
  font-weight: bold;
  font-family: 'Segoe UI', Arial, sans-serif;
  letter-spacing: 1px;
}

.main-header-actions {
  display: flex;
  align-items: center;
  gap: 18px;
}

.main-header-btn {
  background: #ffe14d;
  color: #222;
  font-weight: bold;
  font-size: 1.13em;
  border: none;
  border-radius: 12px;
  padding: 10px 22px;
  cursor: pointer;
  transition: background 0.18s, transform 0.18s;
  font-family: 'Segoe UI', Arial, sans-serif;
  box-shadow: 0 1px 4px rgba(80,0,120,0.07);
  display: flex;
  align-items: center;
  gap: 7px;
}
.main-header-btn:hover {
  background: #ffe97a;
  transform: translateY(-2px) scale(1.03);
}

/* Center Section Redesign */
.center-welcome-container {
  width: 100%;
  max-width: 700px;
  margin: 48px auto 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: transparent;
}
.center-welcome-title {
  font-size: 2.2em;
  font-weight: bold;
  color: #222;
  margin-bottom: 8px;
  text-align: left;
  width: 100%;
}
.center-welcome-desc {
  font-size: 1.15em;
  color: #444;
  margin-bottom: 28px;
  text-align: left;
  width: 100%;
}
/* Updated stepper layout: center numbers and align text */
.center-stepper {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 32px;
  gap: 0;
}
.center-stepper .step {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: flex-start; /* leave labels to the right of the number */
  gap: 12px;
  font-size: 1.08em;
  color: #888;
  font-weight: 500;
  padding: 6px 8px; /* extra hit area for nicer visual centering */
  box-sizing: border-box;
}
.center-stepper .step span {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #a009d7;
  color: #fff;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  font-weight: 700;
  font-size: 1.05em;
  margin: 0;
  flex: 0 0 44px;
}
.center-stepper .step.active {
  color: #a009d7;
  font-weight: 700;
}
/* keep small-screen behaviour intact */
@media (max-width: 900px) {
  .center-stepper .step {
    justify-content: center;
    text-align: center;
  }
}
.center-form-card {
  background: #7a7fdc;
  border-radius: 18px;
  box-shadow: 0 4px 24px rgba(80,0,120,0.13);
  padding: 32px;
  display: flex;
  flex-direction: row;
  gap: 32px;
  align-items: flex-start;
  width: 100%;
  max-width: 700px;
  margin: 0 auto;
  box-sizing: border-box;
}
@media (max-width: 900px) {
  .center-form-card {
    flex-direction: column;
    gap: 18px;
    padding: 18px 8vw 18px 8vw;
  }
}
#assignment-form {
  display: flex;
  flex-direction: column;
  align-items: center;   /* Center children horizontally */
  justify-content: flex-start;
  gap: 0;
  width: 100%;
}
.form-row {
  display: flex;
  flex-direction: column;
  align-items: center;   /* Center label and input horizontally */
  justify-content: center;
  width: 100%;
  max-width: 340px;
  margin: 0 0 22px 0;    /* Remove left margin */
}
.form-row label {
  text-align: center;    /* Center label text */
  margin-right: 0;
  min-width: unset;
  max-width: unset;
  width: 100%;
}
.form-row input,
.form-row select {
  width: 100%;
  max-width: 320px;
  margin-left: 0;
  margin-right: 0;
}
.generate-btn {
  width: 100%;
  max-width: 340px;
  margin-left: 0;
  margin-right: 0;
}
#assignment-form {
  flex: 1;
  display: center;
  flex-direction: column;
  gap: 18px;
}
.form-row {
  display: center;
  flex-direction: column;
  margin-bottom: 0;
}
.form-row label {
  font-size: 1.08em;
  color: #fff;
  font-weight: 500;
  margin-bottom: 6px;
}
.form-row input,
.form-row select {
  font-size: 1.08em;
  padding: 10px;
  border-radius: 8px;
  border: none;
  background: #f7f7fa;
  color: #222;
  margin-bottom: 0;
  box-sizing: border-box;
}
.generate-btn {
  margin-top: 18px;
  background: #ffe14d;
  color: #222;
  font-weight: bold;
  font-size: 1.15em;
  border: none;
  border-radius: 10px;
  padding: 14px 0;
  cursor: pointer;
  transition: background 0.18s, transform 0.18s;
  box-shadow: 0 2px 8px rgba(80,0,120,0.08);
  width: 100%;
}
.generate-btn:hover {
  background: #ffe97a;
  transform: translateY(-2px) scale(1.03);
}
.calendar-preview {
  min-width: 260px;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 2px 8px rgba(80,0,120,0.10);
  padding: 18px 18px 12px 18px;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 32px; /* Add this line for extra space */
  position: relative; /* allow absolute-positioned warnings */
}
.calendar-title {
  font-size: 1.15em;
  font-weight: bold;
  color: #7a07a8;
  margin-bottom: 8px;
}
.calendar-grid {
  display: flex;
  flex-direction: column;
  gap: 2px;
  width: 100%;
}
.calendar-row {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 100%;
}
.calendar-header span {
  font-weight: bold;
  color: #888;
  font-size: 0.98em;
  flex: 1;
  text-align: center;
}
.calendar-row span {
  flex: 1;
  text-align: center;
  padding: 4px 0;
  font-size: 1em;
  color: #222;
  border-radius: 6px;
}
.calendar-active {
  background: #a009d7;
  color: #fff !important;
  font-weight: bold;
}
@media (max-width: 900px) {
  .center-form-card {
    flex-direction: column;
    gap: 18px;
    padding: 18px 8vw 18px 8vw;
  }
    /* When an assignment is selected, allow the form controls to stretch across the bottom */
    .center-form-card.controls-fill {
      align-items: stretch; /* ensure left column and calendar match heights */
    }
    /* Container that holds the 4 controls and stretches them horizontally */
    .assignment-controls {
      display: flex;
      gap: 12px;
      width: 100%;
      margin-top: auto; /* push to bottom of the form column */
    }
    .assignment-controls .form-row {
      flex: 1 1 0;
      max-width: none;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }
    .assignment-controls .form-row label { text-align: left; margin-bottom:6px; }
    .assignment-controls .form-row input,
    .assignment-controls .form-row select {
      width: 100%;
      box-sizing: border-box;
    }
    .assignment-controls .generate-btn {
      align-self: stretch;
      min-width: 0;
      padding: 12px 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .generate-row {
      width: 100%;
      margin-top: 26px; /* move the button lower */
      display: flex;
      justify-content: flex-start; /* keep button on left */
    }
    .generate-row .generate-btn { max-width: 340px; }
    .calendar-preview .warnings,
    .center-form-card .warnings {
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: flex-end; /* align warnings to the right */
      width: 100%;
      box-sizing: border-box;
    }
    .calendar-preview .warning-box {
      background: #d7263d;
      color: #fff;
      border-radius: 8px;
      padding: 12px 14px;
      max-width: 320px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
      font-weight: 600;
      line-height: 1.3;
    }
    /* On wider screens, position warnings at the top-right of the calendar preview */
    @media (min-width: 901px) {
      /* Keep warnings in normal flow; for calendar preview we want them above the grid so
         we give them bottom spacing when used there. */
      .calendar-preview .warnings { position: static; margin-bottom: 18px; align-items: flex-start; }
      .center-form-card .warnings { position: static; margin-top: 18px; align-items: flex-start; }
      .calendar-preview .warning-box, .center-form-card .warning-box { max-width: 320px; font-size: 0.95em; }
    }
    @media (max-width: 900px) {
      .assignment-controls { flex-direction: column; }
      .assignment-controls .form-row { width: 100%; }
    }
  .calendar-preview {
    min-width: unset;
    width: 100%;
    margin-top: 18px;
  }
}
  </style>
</head>
<body>
  <div class="main-header-bar">
    <div class="main-header-left">
      <span class="main-header-icon" aria-hidden="true">
        <svg width="38" height="38" viewBox="0 0 38 38" fill="none"><rect x="3" y="3" width="32" height="32" rx="6" stroke="#fff" stroke-width="3"/><rect x="9" y="9" width="8" height="8" rx="2" stroke="#fff" stroke-width="2"/><rect x="21" y="9" width="8" height="8" rx="2" stroke="#fff" stroke-width="2"/><rect x="9" y="21" width="8" height="8" rx="2" stroke="#fff" stroke-width="2"/><rect x="21" y="21" width="8" height="8" rx="2" stroke="#fff" stroke-width="2"/></svg>
      </span>
      <span class="main-header-title">CEN 100 Assignment Calculator</span>
    </div>
    <div class="main-header-actions">
      <button class="main-header-btn" onclick="window.open('https://www.torontomu.ca/calendar/2025-2026/dates/', '_blank')">üìÖ Significant Dates Calendar</button>
      <button class="main-header-btn" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/', '_blank')">üìç First-Year Engineering Office</button>
      <button class="main-header-btn" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/faq/', '_blank')">‚ùì FAQs</button>
    </div>
  </div>
  <!-- Right column with centered logo -->
  <div class="logo-bg-column">
    <div class="right-support-group" style="background:#fff; box-shadow:0 2px 8px rgba(80,0,120,0.10); border-radius:16px; margin-top:24px;">
      <div class="right-support-title" style="color:#222; font-size:1.5em; font-weight:bold; margin-bottom:16px; display:flex; align-items:center;">
        <span class="emoji" style="font-size:1.2em; margin-right:8px;">‚ûï</span> Additional Support
      </div>
      <button class="right-btn right-btn-yellow" style="background:#ffe14d; color:#222; font-weight:600; font-size:1.13em; margin-bottom:12px;" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/current-students/eng-handbook/', '_blank')">Student Handbook</button>
      <button class="right-btn right-btn-yellow" style="background:#ffe14d; color:#222; font-weight:600; font-size:1.13em; margin-bottom:12px;" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/orientation/first-year-ambassadors/', '_blank')">First-Year Ambassador</button>
      <button class="right-btn right-btn-yellow" style="background:#ffe14d; color:#222; font-weight:600; font-size:1.13em;" onclick="window.open('https://apps.apple.com/ca/app/fyeng-mobile/id1148681745', '_blank')">FYEng Mobile App</button>
    </div>
    <div class="right-support-group" style="background:#fff; box-shadow:0 2px 8px rgba(80,0,120,0.10); border-radius:16px;">
      <div class="right-support-title" style="color:#222; font-size:1.5em; font-weight:bold; margin-bottom:16px; display:flex; align-items:center; flex-wrap:wrap;">
        <span class="emoji" style="font-size:1.2em; margin-right:8px;">üè´</span>
        <span style="display:inline-block;">Group Assignment/CEN100 Support</span>
      </div>
      <button class="right-btn right-btn-blue" style="background:#1857b8; color:#fff; font-weight:600; font-size:1.13em; margin-bottom:12px;" onclick="window.open('https://www.torontomu.ca/policies/policy-list/conflict-interest-policy/', '_blank')">Best Practices for Group Conflict</button>
      <button class="right-btn right-btn-blue" style="background:#1857b8; color:#fff; font-weight:600; font-size:1.13em; margin-bottom:12px;" onclick="window.open('https://www.torontomu.ca/contact/student/', '_blank')">CEN100 Contact</button>
    </div>
    <div style="margin-top:36px; width:90%; display:flex; align-items:flex-end;">
      <span style="display:inline-block; width:6px; height:56px; background:#444; border-radius:3px; margin-right:14px;"></span>
      <span style="font-size:1.55em; font-weight:bold; color:#444; font-family:'Segoe UI', Arial, sans-serif; line-height:1.1; letter-spacing:0.5px;">
        First-Year<br>Engineering<br>Office
      </span>
    </div>
  </div>
  <div style="display: flex; flex-direction: row; align-items: flex-start; width: 100%;">
    <div class="main-content slide-fade delay-1">
      <div class="center-welcome-container">
    <div class="center-welcome-title">Welcome!</div>
    <div class="center-welcome-desc">
      Plan your assignment with ease.<br>
      Select your course, assignment type, start and due date to generate a personalized timeline.
    </div>
    <div class="center-stepper">
      <div class="step active"><span>1</span> Assignment Info</div>
      <div class="step"><span>2</span> Generate Timeline</div>
      <div class="step"><span>3</span> Review &amp; Save</div>
    </div>
    <div class="center-form-card">
      <form id="assignment-form">
        <div class="assignment-controls">
          <div class="form-row">
            <label for="assignment-select">Select Assignment</label>
            <select id="assignment-select">
              <option value="">-- Choose an assignment --</option>
              <option value="email">Professional Email Assignment</option>
              <option value="notebook">Personal Design Notebook</option>
              <option value="whmis">WHMIS Certification</option>
              <option value="matlab">MATLAB Assignments</option>
              <option value="disaster">Engineering Disaster Project</option>
              <option value="reverse">Reverse Engineering Project</option>
              <option value="final">Final Exam</option>
            </select>
          </div>
          <div class="form-row">
            <label>Start Date</label>
            <input type="text" id="start-date" readonly placeholder="Select from calendar">
          </div>
          <div class="form-row">
            <label>Due Date</label>
            <input type="text" id="due-date" readonly placeholder="Select from calendar">
          </div>
        </div>
        <div class="generate-row">
          <button type="submit" class="generate-btn" style="margin-top:0;width:100%;max-width:none;">Generate Timeline</button>
        </div>
      </form>
      <div class="calendar-preview">
        <div class="calendar-title">September 2025</div>
        <div id="calendar-select-mode" style="margin-bottom:8px; font-weight:bold; color:#a009d7;">
          Select Start Date
        </div>
        <div class="warnings" aria-hidden="false" style="display:flex;flex-direction:column;gap:12px;margin-bottom:18px;">
          <div id="deadline-warning" class="warning-box" style="display:none;">‚ö†Ô∏è Your start and due dates are only 3 days apart or less. You run the risk of not finishing your assignment properly on time!</div>
          <div id="short-deadline-warning" class="warning-box" style="display:none;">‚ö†Ô∏è Warning: The time between your start and due date is less than 5 days. This may not be enough time to complete the assignment. Consider contacting your professor for an extension.</div>
        </div>
        <div class="calendar-grid" id="calendar-grid">
          <!-- Calendar will be rendered here -->
        </div>
  <!-- warnings were moved to the card bottom-right -->
        <div style="margin-top:12px; display:flex; gap:10px;">
          <button id="select-start-btn" type="button" class="generate-btn" style="background:#a009d7;color:#fff;font-size:1em;padding:8px 12px;width:auto;">Select Start Date</button>
          <button id="select-due-btn" type="button" class="generate-btn" style="background:#1857b8;color:#fff;font-size:1em;padding:8px 12px;width:auto;">Select Due Date</button>
        </div>
      </div>
  </div>

    <div id="timeline-breakdown" style="margin-top:24px;"></div>
  </div>
    </div>
    <div class="sidebar slide-fade delay-5">
      <div class="sidebar-group">
        <div class="sidebar-group-title" style="color:#222; font-size:1.5em; font-weight:bold; margin-bottom:16px; display:flex; align-items:center; font-family:'Segoe UI', Arial, sans-serif; letter-spacing:1px;">
          <span class="emoji" style="font-size:1.2em; margin-right:8px;">üìö</span> Study Support
        </div>
        <button class="sidebar-btn-new sidebar-btn-yellow" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/academic-support/engineering-aces/', '_blank')">Engineering ACES</button>
        <button class="sidebar-btn-new sidebar-btn-yellow" onclick="window.open('https://www.torontomu.ca/student-life-and-learning/learning-support/math-support/', '_blank')">SLLS Math Tutoring</button>
        <button class="sidebar-btn-new sidebar-btn-yellow" onclick="window.open('https://www.youtube.com/watch?v=gEh5bCdIyP8', '_blank')">OneNote Tutorial</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://www.torontomu.ca/current-students/grades-standings/gpa-calculation/#!accordion-1616785862084-sample-gpa-calculation', '_blank')">GPA Calculator</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://docs.google.com/spreadsheets/d/1aEGwJgybMqa_tTf5M2BcKwx5S-bFzynp-PvdP6Gx618/edit?gid=1592973167#gid=1592973167', '_blank')">FYEO Workload Calendar</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://docs.google.com/document/d/1U1pZkdf9pdaMgoWZuWzx5oP8bMG9GuEzyqk9oEb4S0E/edit?tab=t.0', '_blank')">FYEO Exam Tips</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/academic-support/student-learning-support/', '_blank')">FYEO Exam Tips</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://www.youtube.com/playlist?list=PL81FaJT60qwfXpTbXWY0LCbeONVzfpEmj', '_blank')">YouTube Step-by-Step Guides</button>
      </div>
      <div class="sidebar-group">
        <div class="sidebar-group-title" style="color:#222; font-size:1.5em; font-weight:bold; margin-bottom:16px; display:flex; align-items:center; font-family:'Segoe UI', Arial, sans-serif; letter-spacing:1px;">
          <span class="emoji" style="font-size:1.2em; margin-right:8px;">üéì</span> Academic Support
        </div>
        <button class="sidebar-btn-new sidebar-btn-yellow" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/academic-support/academic-advising/', '_blank')">Virtual Advising Room</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://www.torontomu.ca/engineering-architectural-science/current-students/current-undergraduate/transition-program/', '_blank')">Transition Program</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://www.torontomu.ca/first-year-engineering-office/academic-support/academic-support/#:~:text=Programs%20for%20Academic%20Success&text=First%20Year%20in%20Two%20Years,courses%20over%20two%20academic%20years.', '_blank')">First-Year in Two</button>
        <button class="sidebar-btn-new sidebar-btn-blue" onclick="window.open('https://www.youtube.com/@FirstYearEngineeringOffice', '_blank')">YouTube Step-by-Step Guides</button>
      </div>
    </div>
  </div>
  <!-- Place this OUTSIDE and BELOW the content-row -->
  <!-- <div id="planning-guide-container" style="width:100%; display:flex; justify-content:center; margin-top:40px;">
    <div id="planning-guide" style="width:100%; max-width:700px;"></div>
  </div> -->
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  // Assignment options for each class
  const assignmentOptions = {
    CEN100: [
      { value: "matlab", text: "MATLAB Assignments (12%)" },
      { value: "disaster", text: "Engineering Disaster Project (14%)" },
      { value: "reverse", text: "Reverse Engineering Project (20%)" },
      { value: "final", text: "Final Exam (34%)" }
    ],
    MTH140: [
      { value: "quizzes", text: "Weekly Quizzes (10%)" },
      { value: "labquizzes", text: "Lab Progress Check Quizzes (10%)" },
      { value: "midterm", text: "Midterm (35%)" },
      { value: "final", text: "Final Exam (40%)" }
    ],
    PCS211: [
      { value: "tutorials", text: "Tutorials (10%, 2% Each, 5 Total)" },
      { value: "labreports", text: "Lab Reports (20%, 4% Each, 5 Total)" },
      { value: "midterms", text: "Midterm Tests (30%, 15% Each, 1/2)" },
      { value: "final", text: "Final Exam (33%)" }
    ],
    MTH141: [
      { value: "quizzes", text: "Quizzes (15%, 10 Total)" },
      { value: "midterm", text: "Midterm (35%)" },
      { value: "final", text: "Final Exam (50%)" }
    ],
    CHY102: [
      { value: "homework", text: "Homework Assignments (10%)" },
      { value: "adaptive", text: "Pre-lecture Adaptive Assignment (5%)" },
      { value: "midterms", text: "Midterms (22.5% Each, 1/2)" },
      { value: "final", text: "Final Exam (35%)" }
    ]
  };

  const classSelect = document.getElementById('class-select');
  const assignmentSelect = document.getElementById('assignment-select');

  classSelect.addEventListener('change', function() {
    const selectedClass = classSelect.value;
    // Clear previous options
    assignmentSelect.innerHTML = '<option value="">-- Choose an assignment --</option>';
    if (assignmentOptions[selectedClass]) {
      assignmentOptions[selectedClass].forEach(opt => {
        const option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.text;
        assignmentSelect.appendChild(option);
      });
    }
  });
</script>
<script>
  // On DOM load, trigger animation by forcing reflow (for safety in some browsers)
  window.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.slide-fade').forEach(el => {
      // This will trigger the animation if not already started
      el.style.animationPlayState = 'running';
    });
  });
</script>
<script>
const calendarGrid = document.getElementById('calendar-grid');
const calendarSelectMode = document.getElementById('calendar-select-mode');
const selectStartBtn = document.getElementById('select-start-btn');
const selectDueBtn = document.getElementById('select-due-btn');
const calendarTitle = document.querySelector('.calendar-title');

// Add month/year selectors
calendarTitle.innerHTML = `
  <button id="prev-month" style="background:none;border:none;font-size:1.2em;cursor:pointer;">&#8592;</button>
  <span id="calendar-month-label"></span>
  <button id="next-month" style="background:none;border:none;font-size:1.2em;cursor:pointer;">&#8594;</button>
  <select id="calendar-year" style="font-size:1em;margin-left:8px;"></select>
`;

const monthLabel = document.getElementById('calendar-month-label');
const prevMonthBtn = document.getElementById('prev-month');
const nextMonthBtn = document.getElementById('next-month');
const yearSelect = document.getElementById('calendar-year');

let selecting = 'start'; // 'start' or 'due'
let selectedStart = null;
let selectedDue = null;
let calendarMonth = 8; // 0-indexed: 8 = September
let calendarYear = 2025;

// Populate year dropdown (2022-2028 as example)
for (let y = 2022; y <= 2028; y++) {
  const opt = document.createElement('option');
  opt.value = y;
  opt.textContent = y;
  if (y === calendarYear) opt.selected = true;
  yearSelect.appendChild(opt);
}

function getMonthName(monthIdx) {
  return [
    "January","February","March","April","May","June",
    "July","August","September","October","November","December"
  ][monthIdx];
}

function renderCalendar() {
  monthLabel.textContent = `${getMonthName(calendarMonth)} ${calendarYear}`;
  calendarGrid.innerHTML = '';
  const headerRow = document.createElement('div');
  headerRow.className = 'calendar-row calendar-header';
  ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d => {
    const span = document.createElement('span');
    span.textContent = d;
    headerRow.appendChild(span);
  });
  calendarGrid.appendChild(headerRow);

  const firstDay = new Date(calendarYear, calendarMonth, 1).getDay();
  const daysInMonth = new Date(calendarYear, calendarMonth + 1, 0).getDate();

  let day = 1;
  for (let week = 0; week < 6; week++) {
    const row = document.createElement('div');
    row.className = 'calendar-row';
    for (let dow = 0; dow < 7; dow++) {
      const cell = document.createElement('span');
      if ((week === 0 && dow < firstDay) || day > daysInMonth) {
        cell.textContent = '';
      } else {
        cell.textContent = day;
        cell.style.cursor = 'pointer';
        const dateStr = `${calendarYear}-${String(calendarMonth+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
        cell.dataset.date = dateStr;
        if (selectedStart === dateStr) cell.classList.add('calendar-active');
        if (selectedDue === dateStr) {
          cell.style.background = '#1857b8';
          cell.style.color = '#fff';
        }
        cell.onclick = function() {
          if (selecting === 'start') {
            selectedStart = dateStr;
            startDateInput.value = selectedStart;
          } else {
            selectedDue = dateStr;
            dueDateInput.value = selectedDue;
          }
          renderCalendar();
          checkDeadlineWarning(); // <-- Add this line
        };
        day++;
      }
      row.appendChild(cell);
    }
    calendarGrid.appendChild(row);
    if (day > daysInMonth) break;
  }
}
renderCalendar();

selectStartBtn.onclick = function() {
  selecting = 'start';
  calendarSelectMode.textContent = 'Select Start Date';
};
selectDueBtn.onclick = function() {
  selecting = 'due';
  calendarSelectMode.textContent = 'Select Due Date';
};

prevMonthBtn.onclick = function() {
  calendarMonth--;
  if (calendarMonth < 0) {
    calendarMonth = 11;
    calendarYear--;
    yearSelect.value = calendarYear;
  }
  renderCalendar();
};
nextMonthBtn.onclick = function() {
  calendarMonth++;
  if (calendarMonth > 11) {
    calendarMonth = 0;
    calendarYear++;
    yearSelect.value = calendarYear;
  }
  renderCalendar();
};
yearSelect.onchange = function() {
  calendarYear = parseInt(yearSelect.value, 10);
  renderCalendar();
};
</script>
<script>
  const startDateInput = document.getElementById('start-date');
const dueDateInput = document.getElementById('due-date');
const warningDiv = document.getElementById('deadline-warning');
const shortDeadlineWarning = document.getElementById('short-deadline-warning'); // <-- Add this

function checkDeadlineWarning() {
  const start = new Date(startDateInput.value);
  const due = new Date(dueDateInput.value);
  if (start && due && !isNaN(start) && !isNaN(due)) {
    const diffTime = due - start;
    const diffDays = diffTime / (1000 * 60 * 60 * 24);
    if (diffDays <= 3) {
      warningDiv.style.display = 'block';
    } else {
      warningDiv.style.display = 'none';
    }
    // Show new warning if less than 5 days
    if (diffDays < 5) {
      shortDeadlineWarning.style.display = 'block';
    } else {
      shortDeadlineWarning.style.display = 'none';
    }
  } else {
    warningDiv.style.display = 'none';
    shortDeadlineWarning.style.display = 'none';
  }
}

startDateInput.addEventListener('change', checkDeadlineWarning);
dueDateInput.addEventListener('change', checkDeadlineWarning);
</script>
<script>
  // Dark mode toggle logic
  const modeToggle = document.getElementById('mode-toggle');
  const body = document.body;

  // Set initial mode from localStorage
  if (localStorage.getItem('mode') === 'dark') {
    body.classList.add('dark-mode');
    modeToggle.textContent = '‚òÄÔ∏è Light Mode';
  }

  modeToggle.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    if (body.classList.contains('dark-mode')) {
      modeToggle.textContent = '‚òÄÔ∏è Light Mode';
      localStorage.setItem('mode', 'dark');
    } else {
      modeToggle.textContent = 'üåô Dark Mode';
      localStorage.setItem('mode', 'light');
    }
  });
</script>
<script>
// Assignment details mapping
const assignmentDetails = {
  email: {
    header: "EMAIL ASSIGNMENT (2%)",
    description: `Professionally written email regarding job shadowing opportunities at a company of your choice.<br>
    <ul>
      <li>Be professional, introduce yourself, explain why you're inquiring, state your availability, and use a polite sign-off.</li>
      <li>Submit your email to the project manager (PM).</li>
    </ul>`,
    dueDate: "2025-09-18"
  },
  notebook: {
    header: "Personal Design Notebook (4%)",
    description: `
      <ul>
        <li>Draw original design of your choice (can include diagrams, explanations).</li>
        <li>Each entry builds off the last‚Äîfollow instructions very closely.</li>
        <li>Make sure the original concept is improved each entry (do not make new designs after 1st entry).</li>
        <li><b>Due Dates:</b> Sept 18, Oct 16, Nov 13 (3 entries total, each worth 1.33%)</li>
      </ul>
    `,
    dueDate: "2025-09-18" // First due date as default
  },
  whmis: {
    header: "WHMIS Certification (2%)",
    description: `
      <ul>
        <li>D2L quizzes ‚Äì mandatory completion.</li>
        <li>Marked based off of quiz score.</li>
      </ul>
    `,
    dueDate: "2025-10-16"
  },
  matlab: {
    header: "MATLAB Assignments (12%)",
    description: `
      <ul>
        <li>Complete 3-question assignment.</li>
        <li>Work in groups of 2-3 (students choose groups).</li>
        <li>Answer questions correctly.</li>
        <li>Listen to GA's lessons during tutorials.</li>
        <li><b>Due Dates:</b> Sept 25, Oct 2, Oct 9</li>
      </ul>
    `,
    dueDate: "2025-09-25" // First due date as default
  },
  disaster: {
    header: "Engineering Disaster Project (14%)",
    description: `
      <ul>
        <li>Write a formal report and short presentation on an engineering disaster of your choice.</li>
        <li>Students choose teams of 5-7.</li>
        <li>Follow rubric closely.</li>
        <li>Read <b>ALL</b> provided documents for maximum clarity.</li>
        <li>Recommended: Host weekly meetings on your own time to stay up to date on milestones.</li>
        <li><b>Due Dates:</b> Oct 23 and Oct 30</li>
      </ul>
    `,
    dueDate: "2025-10-23" // First due date as default
  },
  reverse: {
    header: "Reverse Engineering Project (20%)",
    description: `

      <ul>
        <li>Create a formal report and presentation on an original product that is continuously improved.</li>
        <li>Groups of 10-13.</li>
        <li>Follow rubric closely.</li>
        <li>Read <b>ALL</b> provided documents for maximum clarity.</li>
        <li>Recommended: Host weekly meetings on your own time to stay up to date on milestones.</li>
        <li><b>Due Dates:</b> Nov 6, Nov 13, Nov 20, Nov 27</li>
      </ul>
    `,
    dueDate: "2025-11-06" // First due date as default
  },
  final: {
    header: "Final Exam (24%)",
    description: `

      <ul>
        <li>100+ questions</li>
        <li>Cumulative, covers all course content</li>
        <li>2-hour in-person cumulative exam, Weeks 1‚Äì13
        <li>Bring student ID, calculator, and writing tools</li>
        <li>Check D2L for exact date/time/location</li>
        <li> PowerPoint presentations posted on D2L, Any completed assignments or quizzes (like WHMIS, Academic Integrity)
      </ul>
    `,
    dueDate: "" // Leave blank for TBD
  }
  // Add more assignments here as needed
};

  // Elements for dynamic update (add these IDs to your HTML if not present)
  const assignmentSelectEl = document.getElementById('assignment-select');
  const assignmentHeader = document.createElement('div');
  assignmentHeader.id = "assignment-header";
  assignmentHeader.style = "color:#fff;font-size:1.3em;font-weight:bold;margin:18px 0 8px 0;";
  const assignmentDesc = document.createElement('div');
  assignmentDesc.id = "assignment-desc";
  assignmentDesc.style = "color:#fff;font-size:1em;margin-bottom:8px;";
  const dueDateInputEl = document.getElementById('due-date');

  // Insert header/desc above the form if not already present
  const formRow = document.querySelector('.form-row');
  if (formRow && !document.getElementById('assignment-header')) {
    formRow.parentNode.insertBefore(assignmentHeader, formRow);
    formRow.parentNode.insertBefore(assignmentDesc, formRow);
  }

  // Listen for assignment changes
  assignmentSelectEl.addEventListener('change', function() {
    const val = assignmentSelectEl.value;
    if (assignmentDetails[val]) {
      assignmentHeader.innerHTML = assignmentDetails[val].header;
      assignmentDesc.innerHTML = assignmentDetails[val].description;
      dueDateInputEl.value = assignmentDetails[val].dueDate;
    } else {
      assignmentHeader.innerHTML = "";
      assignmentDesc.innerHTML = "";
      dueDateInputEl.value = "";
    }
    // Toggle the layout class so controls fill the bottom when an assignment is selected
    const centerCard = document.querySelector('.center-form-card');
    if (centerCard) {
      if (val) centerCard.classList.add('controls-fill');
      else centerCard.classList.remove('controls-fill');
    }
  });
</script>
<script>
document.getElementById('assignment-form').addEventListener('submit', function(e) {
  e.preventDefault();

  // Highlight the "Generate Timeline" and also the "Review & Save" steps in the stepper
  document.querySelectorAll('.center-stepper .step').forEach((el, idx) => {
    if (idx === 1 || idx === 2) {
      el.classList.add('active');
      el.style.color = '#a009d7';
      el.style.fontWeight = 'bold';
    } else {
      el.classList.remove('active');
      el.style.color = idx === 0 ? '#a009d7' : '#888';
      el.style.fontWeight = idx === 0 ? 'bold' : '500';
    }
  });

  const assignment = document.getElementById('assignment-select').value;
  const start = document.getElementById('start-date').value;
  const due = document.getElementById('due-date').value;
  const breakdownDiv = document.getElementById('timeline-breakdown');

  if (!assignment || !start || !due) {
    breakdownDiv.innerHTML = `<div style="color:#d7263d;font-weight:bold;">Please select an assignment, start date, and due date.</div>`;
    return;
  }

  const startDate = new Date(start);
  const dueDate = new Date(due);
  const days = Math.floor((dueDate - startDate) / (1000 * 60 * 60 * 24));
  if (days < 0) {
    breakdownDiv.innerHTML = `<div style="color:#d7263d;font-weight:bold;">Due date must be after start date.</div>`;
    return;
  }
  // Block timeline generation if less than 5 days
  if (days < 5) {
    alert("Warning: The time between your start and due date is less than 5 days. This may not be enough time to complete the assignment. Consider contacting your professor for an extension.");
    return;
  }

  function generateStepRanges(breakdown, startDate, days) {
    const steps = [];
    const stepCount = breakdown.length;
    // Calculate how many days per step (distribute as evenly as possible)
    const baseDaysPerStep = Math.floor((days + 1) / stepCount);
    let remainder = (days + 1) % stepCount;
    let currentDay = 1;
  
    for (let i = 0; i < stepCount; i++) {
      let daysForThisStep = baseDaysPerStep + (remainder > 0 ? 1 : 0);
      remainder--;
  
      const start = currentDay;
      const end = currentDay + daysForThisStep - 1;
      const startDateObj = new Date(startDate);
      startDateObj.setDate(startDateObj.getDate() + (start - 1));
      const endDateObj = new Date(startDate);
      endDateObj.setDate(endDateObj.getDate() + (end - 1));
  
      let dayLabel = daysForThisStep === 1
        ? `Day ${start} (${startDateObj.toLocaleDateString()})`
        : `Days ${start}-${end} (${startDateObj.toLocaleDateString()} to ${endDateObj.toLocaleDateString()})`;
  
      steps.push(`${dayLabel}: <br>${breakdown[i]}`);
      currentDay += daysForThisStep;
    }
    return steps;
  }

  let steps = [];
  if (assignment === "email") {
    let breakdown = [
      `<b>Step 1: Research Your Field of Interest</b><br>
      Pick an engineering field you are curious about (e.g., civil, software, aerospace).<br>
      Use professional platforms (LinkedIn, company websites, Google) to find an engineer or company in that field.<br>
      Learn about their work and find out what inspires you.<br>
      <i>Tip: Use the CEN100 Writing Support Resources.</i>`,

      `<b>Step 2: Brainstorm and Justify Your Selection (Paragraph)</b><br>
      Draft a short paragraph (3‚Äì5 sentences) explaining:<br>
      - Why you chose this engineering discipline<br>
      - Why you chose that Engineer<br>
      - What about their work or projects connects with your interests and goals`,

      `<b>Phase 2: Drafting the Email</b><br>
      <b>Step 3: Write a Professional Email</b><br>
      <u>Follow these content guidelines:</u><br>
      <b>Subject Line:</b> Include course code: CEN100 and a short description (e.g., ‚ÄúRequest for Job Shadowing Opportunity ‚Äì CEN100‚Äù)<br>
      <b>Greeting:</b> Use correct title: Dear Dr./Mr./Ms./Mrs. [Last Name]<br>
      <b>Introduction:</b> State your name, program, and school. Mention your interest in their field and any related experiences (courses, clubs, etc.)<br>
      <b>Email Body:</b> Express interest in job shadowing. Mention a specific project or technology of theirs that inspires you. Suggest a general time frame for shadowing. Be respectful and flexible with their availability.<br>
      <b>Closing:</b> Thank them for their time. Include your full name and student number. End with: Sincerely, Best regards, etc.`,

      `<b>Phase 3: Reflection & Submission</b><br>
      <b>Step 4: Write a Short Reflection</b><br>
      In 1‚Äì2 short paragraphs, explain:<br>
      - Why you selected that company/engineer<br>
      - How you personalized the email<br>
      - What you learned about the engineering profession during your research`,

      `<b>Step 5: Submit Your Assignment</b><br>
      Send the following to your PM‚Äôs email address from your @torontomu.ca account:<br>
      - Drafted email (in the body of the email)<br>
      - Paragraph about your engineer/company selection<br>
      - Reflection paragraph<br>
      <b>Submission Checklist:</b><br>
      - Correct subject line with CEN100<br>
      - Proper greeting and closing<br>
      - No grammar or spelling mistakes<br>
      - Your name and student number included<br>
      - Sent from your TMU email address<br>
      - Attached or pasted all required components`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else if (assignment === "notebook") {
    let breakdown = [
      `<b>Phase 1: Getting Started</b><br>
      <b>First Due Date:</b> September 18, 2024, at 3:00 PM<br>
      <b>Step 1: Set Up Your Engineering Notebook</b><br>
      - Use Microsoft OneNote (available through your TMU student account).<br>
      - Create a notebook titled: <i>YourFullName - CEN100 Design Notebook</i>.<br>
      - Organize entries by date; each entry goes on a separate page.<br>
      - Learn basic OneNote tools (drawing, typing, inserting images, audio, etc.).<br>
      <i>Tip: Use the CEN100 Writing Support Resources.</i>`,

      `<b>Step 2: Begin Making Entries</b><br>
      - Start brainstorming: What problems or design ideas interest you?<br>
      - Record all relevant material:<br>
      &nbsp;&nbsp;&bull; Notes<br>
      &nbsp;&nbsp;&bull; Sketches / free-body diagrams<br>
      &nbsp;&nbsp;&bull; Calculations<br>
      &nbsp;&nbsp;&bull; Assumptions<br>
      &nbsp;&nbsp;&bull; Meeting summaries<br>
      &nbsp;&nbsp;&bull; Observations and design thinking<br>
      &nbsp;&nbsp;&bull; Drafts for related assignments`,

      `<b>Step 3: Update Regularly</b><br>
      - Minimum suggestion: 2 entries per week<br>
      - Don‚Äôt delete ‚Äî strike through instead if something changes.<br>
      - If you‚Äôre using a paper notebook, scan and upload pages into OneNote weekly.<br>
      - For 2nd and 3rd entries, do not start new ideas - build off and improve your previous ideas.`,

      `<b>Phase 2: Mid-Semester Check-In</b><br>
      <b>Mid Due Date:</b> October 16, 2024, at 3:00 PM<br>
      <b>Step 4: Midpoint Review</b><br>
      - Ensure consistent, dated entries.<br>
      - Include both individual and team project contributions.<br>
      - Reflect design process development so far ‚Äî it doesn‚Äôt need to be polished, just complete and genuine.`,

      `<b>Step 5: Export & Submit (Mid Check-In)</b><br>
      - Export the current version of your OneNote notebook as a PDF.<br>
      - Upload to D2L &gt; Assignments &gt; Personal Design Notebook.<br>
      - Click Submit.`,

      `<b>Phase 3: Final Submission</b><br>
      <b>Final Due Date:</b> November 13, 2024, at 3:00 PM<br>
      <b>Step 6: Final Entries</b><br>
      - Ensure your notebook includes a full record of your design thinking process, from ideas to project contributions.<br>
      - Prioritize clarity, completeness, and organization.<br>
      - Avoid blank or missing weeks.`,

      `<b>Step 7: Export & Submit (Final Submission)</b><br>
      - Once completed, export the full notebook as a PDF.<br>
      - Submit the file via D2L under the same assignment dropbox.<br>
      - Double-check that your file is complete and all pages are legible (especially scanned images).`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else if (assignment === "whmis") {
    let breakdown = [
      `<b>Step 1: Log into the WHMIS D2L Module</b><br>
    - Go to: <a href="https://my.torontomu.ca" target="_blank">my.torontomu.ca</a><br>
    - Open the WHMIS course shell<br>
    - Navigate to <b>Content</b><br>
    - Find the WHMIS eLearning Module<br>
    - You‚Äôll see two modules:<br>
    &nbsp;&nbsp;&bull; Introduction to WHMIS<br>
    &nbsp;&nbsp;&bull; WHMIS Labels & Safety Data Sheets`,

     
      `<b>Step 2: Complete Each Module</b><br>
    - You can access each module in different formats:<br>
    &nbsp;&nbsp;&bull; Web version (with narration and visuals)<br>
    &nbsp;&nbsp;&bull; MP3 audio<br>
    &nbsp;&nbsp;&bull; PDF transcript<br>
    - Use the format that works best for your learning style.<br>
    - Watch or listen to the entire module<br>
    - Take notes on key terms: hazard symbols, SDS sheets, label types, etc.`,

      `<b>Step 3: Take the Module Quizzes</b><br>
    - After each module:<br>
    &nbsp;&nbsp;&bull; Return to the module description<br>
    &nbsp;&nbsp;&bull; Click the quiz link<br>
    &nbsp;&nbsp;&bull; Complete the quiz (you must score at least 80% to pass)<br>
    - You must pass both quizzes (one per module) to earn your certification.<br>
    <i>Tip: You can save your answers as you go and submit when finished.</i>`,

      `<b>Phase 2: Certification</b><br>
    <b>Step 4: Receive & Download Your WHMIS Award</b><br>
    - After passing both quizzes, you will automatically receive the WHMIS certificate (award)<br>
    - To access it:<br>
    &nbsp;&nbsp;&bull; Go to <b>Awards</b> in the course navigation bar in D2L<br>
    &nbsp;&nbsp;&bull; Find the WHMIS Award<br>
    &nbsp;&nbsp;&bull; Click to download or print it<br>
    - This is proof of your successful certification.`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else if (assignment === "matlab") {
    let breakdown = [
      `<b>Step 1: Understand the Concepts</b><br>
    - Don‚Äôt just aim to finish‚Äîunderstand what predefined functions and matrix operations do.<br>
    - Review lecture examples first (see D2L slides).`,

      `<b>Step 2: Work With Your Partner</b><br>
    - Split the tasks fairly and review each other‚Äôs work.<br>
    - Make sure both partners understand the full script.`,

      `<b>Step 3: Write Clean, Commented Code</b><br>
    - Use clear variable names and explain your steps using comments.<br>
    - Keep the code organized and readable.`,

      `<b>Step 4: Test Your Code</b><br>
    - Run your script after each part to catch errors early.<br>
    - Check that your outputs make sense.`,

      `<b>Step 5: Use Student ID Correctly</b><br>
    - If a question uses your ID digits, assign them accordingly.`,

      `<b>Step 6: Ask for Help Early</b><br>
    - If you're stuck, ask your partner, the TA, or instructor.<br>
    - Don‚Äôt wait until the last day.`,

      `<b>Step 7: Follow Submission Rules Exactly</b><br>
    - Double-check you have followed all instructions for submission.`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else if (assignment === "disaster") {
    let breakdown = [
      `<b>Step 1: Form Your Group</b><br>
    - Group size: 5‚Äì7 students.<br>
    - Ensure all members are committed and accessible for meetings and communication.`,

      `<b>Step 2: Select Your Disaster Topic</b><br>
    - Choose from the list provided or get approval for a custom topic.<br>
    - Make sure it has enough depth to analyze causes, consequences, ethics, etc.<br>
    <i>Suggested: Chernobyl, Challenger, Deepwater Horizon, Hyatt Walkway Collapse.</i>`,

      `<b>Phase 2: Pre-Paper Deliverables</b><br>
    <b>Due: Wednesday, October 26 @ 3:00 PM</b><br>
    <b>Step 3: Team Contract</b><br>
    - Use the template provided by your instructor.<br>
    - Define communication tools, meeting frequency, expectations, conflict resolution.<br>
    - All members must digitally sign the contract.<br>
    <i>Tip: Use the CEN100 Writing Support Resources.</i>`,

      `<b>Step 4: Project Task Outline</b><br>
    - Use the provided task template.<br>
    - Define research and writing responsibilities, presentation roles, deadlines.<br>
    - Track task progress and updates.`,

      `<b>Step 5: Extended Abstract (Max 500 words)</b><br>
    - Draft a summary: brief description of the disaster, key points for the final paper, expected outcomes or lessons learned.<br>
    - Keep it clear, concise, and structured.`,

      `<b>Step 6: Presentation (Max 5 minutes)</b><br>
    - At least 2 group members present.<br>
    - Include overview, progress, next steps, project timeline, and division of tasks.<br>
    - Use PowerPoint or Google Slides. Keep it visual, not text-heavy.`,

      `<b>Phase 3: Research and Writing the Paper</b><br>
    <b>Final Paper Due: Wednesday, November 2 @ 3:00 PM</b><br>
    <b>Step 7: Conduct In-Depth Research</b><br>
    - Gather at least 10 credible sources (journals, books, news, official reports).<br>
    - Use IEEE citation style from the start.`,

      `<b>Step 8: Write the Research Paper</b><br>
    - 10 pages (excluding title, references, appendices).<br>
    - Structure: Abstract, Introduction, Analysis, Recommendations, Conclusions, Acknowledgments, References, Breakdown of Duties.<br>
    - Address technical causes, timeline, ethics, consequences, and recommendations.<br>
    - Use diagrams/charts where needed.`,

      `<b>Step 9: Formatting</b><br>
    - Font: Times New Roman<br>
    - Size: 14 (title), 12 (headings), 11 (body)<br>
    - Spacing: Single-spaced<br>
    - Margins: 3.1 cm<br>
    - Figures/tables labeled and captioned.`,

      `<b>Step 10: Include Peer Review Template</b><br>
    - Each member evaluates others‚Äô contributions.<br>
    - Include as appendix or separate page in your submission.`,

      `<b>Phase 4: Submission</b><br>
    - Submit all components via D2L.<br>
    - Proofread, correctly format, digitally sign where required.<br>
    - Upload before the deadlines (check D2L or ask PMs for specifics).`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else if (assignment === "final") {
    let breakdown = [
      `<b>Phase 1: Preparation & Study</b><br>
    <b>Exam Period:</b> December 3‚Äì14, 2025 (exact date TBA)<br>
    <b>Format:</b> 2-hour in-person cumulative exam<br>
    <b>Coverage:</b> All lecture content and presentations from Weeks 1‚Äì13<br>
    <b>Submission:</b> Attend and write the exam in your assigned location`,

      `<b>Step 1: Track the Exam Date</b><br>
    - The exact exam date will be announced by the Registrar.<br>
    - Check your MyServiceHub account and course D2L shell regularly.<br>
    <i>Tip: If you have an exam conflict, notify your instructor and FYEO within two weeks of the schedule release.</i>`,

      `<b>Step 2: Gather Study Materials</b><br>
    - Organize lecture notes from all 13 weeks<br>
    - Download PowerPoint presentations from D2L<br>
    - Review completed assignments/quizzes (WHMIS, Academic Integrity, etc.)<br>
    - Review your Design Notebook for inspiration<br>
    <i>Tip: Use the FYEO Exam Tips. Consider sharing notes with classmates.</i>`,

      `<b>Step 3: Review Week-by-Week</b><br>
    - Systematically review all lecture topics, focusing on key sessions:<br>
    &nbsp;&nbsp;&bull; Introduction to Engineering & FEAS<br>
    &nbsp;&nbsp;&bull; Teamwork and Academic Integrity<br>
    &nbsp;&nbsp;&bull; WHMIS and Engineering Safety<br>
    &nbsp;&nbsp;&bull; Engineering Disciplines<br>
    &nbsp;&nbsp;&bull; Design Process, Reverse Engineering, Ethics<br>
    &nbsp;&nbsp;&bull; Career Planning & Professional Practice<br>
    - Summarize each lecture in 5‚Äì7 bullet points<br>
    - Highlight key terms, definitions, and case studies<br>
    - Practice explaining concepts in your own words`,

      `<b>Phase 2: Practice & Final Prep</b><br>
    <b>Step 4: Create a Study Schedule</b><br>
    - Use a calendar to break down your study time:<br>
    &nbsp;&nbsp;&bull; Nov 25‚ÄìDec 1: Review lectures/notes (Weeks 1‚Äì6)<br>
    &nbsp;&nbsp;&bull; Dec 2‚Äì4: Review lectures/notes (Weeks 7‚Äì13)<br>
    &nbsp;&nbsp;&bull; 2‚Äì3 days before exam: Practice questions, review flagged material`,

      `<b>Step 5: Simulate the Exam</b><br>
    - Set a timer for 2 hours and write a mock exam<br>
    - Create questions from lecture slides and test yourself<br>
    - Practice short answers on:<br>
    &nbsp;&nbsp;&bull; Ethical responsibilities of an engineer<br>
    &nbsp;&nbsp;&bull; Difference between supplier and workplace WHMIS labels<br>
    &nbsp;&nbsp;&bull; How to validate an engineering design<br>
    <i>Optional: Quiz with friends or book a study session with Engineering ACES.</i>`,

      `<b>Pre-Exam Day Checklist</b><br>
    - Check your exam time and location on MyServiceHub<br>
    - Pack necessary supplies (pens, ID, calculator if allowed)<br>
    - Get a full night‚Äôs sleep<br>
    - Eat something light and stay hydrated`,

      `<b>Final Submission Checklist</b><br>
    <b>At the exam:</b><br>
    - Arrive 15‚Äì30 minutes early<br>
    - Bring valid TMU Student ID<br>
    - Follow all proctoring rules and instructions<br>
    - Write your best ‚Äì this is worth 24‚Äì34% of your final grade`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else if (assignment === "reverse") {
    let breakdown = [
      `<b>Phase 1: Team Formation and Planning</b><br>
      <b>Deadline:</b> ASAP (Well before November 10)<br>
      <b>Step 1: Form Your Group</b><br>
      - Group Size: Approximately 10‚Äì12 students<br>
      - Confirm availability and commitment from each member<br>
      - Decide on team communication tools (e.g., WhatsApp, Text, Discord)<br>
      - Schedule weekly meetings (virtual/in-person)`,

      `<b>Step 2: Select a Covid-Related Product or Process to Redesign</b><br>
      - Choose a real product/process currently used during or after the pandemic<br>
      - It must be functional but has room for improvement (not failed)<br>
      - Refer to theme areas (Health, Travel, Education, Community)<br>
      - Get instructor approval if choosing a unique or custom topic`,

      `<b>Phase 2: Pre-Project Deliverables</b><br>
      <b>Due:</b> Wednesday, November 10 @ 3:00 PM<br>
      <b>Step 3: Team Contract</b><br>
      - Tip: Use the CEN100 Writing Support Resources<br>
      - Use the provided template<br>
      - Define: communication method, meeting schedule and attendance expectations, deadlines and task ownership, conflict resolution strategy<br>
      - All members must sign digitally`,

      `<b>Step 4: Project Task Outline</b><br>
      - Use the instructor's template or Google Sheets<br>
      - Assign: research responsibilities (background, technical, market), writing roles (sections of the final report), presentation roles (who presents what)<br>
      - Set deadlines for internal drafts and meetings<br>
      - Track progress weekly`,

      `<b>Phase 3: Proposal Phase</b><br>
      <b>Proposal Due:</b> Wednesday, November 17 @ 3:00 PM<br>
      <b>Step 5: Write the Proposal (Max 500 Words)</b><br>
      - Include: Cover Sheet (project title, team member info, course, instructor, etc.)<br>
      - Background: What is the product/process? What problem does it solve? Why isn‚Äôt the current version ideal for post-COVID use?<br>
      - Proposed Redesign: Brief overview of anticipated changes/improvements<br>
      - Milestones + Work Division: Timeline of phases and who will do what`,

      `<b>Phase 4: Design, Research & Iteration</b><br>
      <b>Final Report & Presentation Due:</b> Wednesday, November 24 @ 3:00 PM<br>
      <b>Step 6: Conduct Technical Research</b><br>
      - Reverse engineer the product: How does it work? Materials used (create Bill of Materials), sketch or draw the original design<br>
      - Analyze: sustainability, UX, cost, performance, accessibility, public value, etc.<br>
      - Collect 10+ credible sources (IEEE style)`,

      `<b>Step 7: Design Iterations</b><br>
      - Create three versions of your redesign:<br>
      &nbsp;&nbsp;&bull; Version 1: Initial idea<br>
      &nbsp;&nbsp;&bull; Version 2: Refined based on evaluation<br>
      &nbsp;&nbsp;&bull; Version 3: Final model<br>
      - Each version must have: sketch or model, evaluation explanation (what worked, what didn‚Äôt)`,

      `<b>Phase 5: Report and Presentation</b><br>
      <b>Due:</b> Wednesday, November 24 @ 3:00 PM<br>
      <b>Step 8: Write the Final Report (Min 5000 words)</b><br>
      - Structure: Abstract (Max 250 words), Introduction, Background (technical analysis of original), Evaluation, Redesign Proposal (3 versions, evaluation), Marketing (create one ad, identify/explain target market), References (10+ in IEEE format), Appendices (optional: sketches, mockups, calculations)<br>
      - Formatting: Font: Times New Roman, Size: 14 (title), 12 (headings), 11 (body), Spacing: Single-spaced, Margins: 3.1 cm, Figures/tables must be labeled and captioned`,

      `<b>Step 9: Prepare and Deliver the Presentation</b><br>
      - Group presentation: 15 minutes + 5 mins Q&A<br>
      - Use PowerPoint or Google Slides<br>
      - Content to include: overview of original product, limitations for post-COVID, redesign process (3 iterations), final design and evaluation, marketing strategy<br>
      - Keep slides visual and concise<br>
      - Everyone must speak; one person shares the screen<br>
      - Practice multiple times as a group`,

      `<b>Phase 6: Final Review and Peer Assessment</b><br>
      <b>Peer Review Due:</b> December 2 @ 3:00 PM<br>
      <b>Step 10: Peer Review</b><br>
      - Complete using the disaster project peer review template<br>
      - Evaluate each team member fairly<br>
      - Submit as a separate document or in an appendix`
    ];
    steps = generateStepRanges(breakdown, startDate, days);
  } else {
    // Generic fallback for other assignments
    steps = [`Days 1-${days + 1} (${startDate.toLocaleDateString()} to ${dueDate.toLocaleDateString()}): Work on your assignment. Break your work into research, drafting, editing, and final review as needed.`];
  }

  breakdownDiv.innerHTML = `
    <div style="background:#fffbe7;border-radius:18px;padding:32px 38px;margin-top:18px;box-shadow:0 4px 16px rgba(80,0,120,0.13); max-width:900px; font-size:1.22em;">
      <div style="font-weight:bold;color:#a009d7;margin-bottom:18px;font-size:1.35em;">Step-by-Step Timeline:</div>
      <ol style="padding-left:32px;">
        ${steps.map(step => `<li style="margin-bottom:18px;line-height:1.7;">${step}</li>`).join('')}
      </ol>
      <div style="display:flex; gap:16px; margin-top:24px;">
        <button id="download-timeline-btn" style="background:#ffe14d;color:#222;font-weight:bold;font-size:1.15em;border:none;border-radius:10px;padding:14px 32px;cursor:pointer;box-shadow:0 2px 8px rgba(80,0,120,0.08);">
          Save and Download
        </button>
        <button id="feedback-btn" style="background:#1857b8;color:#fff;font-weight:600;font-size:1.13em;border:none;border-radius:10px;padding:14px 32px;cursor:pointer;box-shadow:0 2px 8px rgba(80,0,120,0.08);display:flex;align-items:center;gap:8px;"
          onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLScGjoCU9KW7aR4jlmjI10SKbpqavCE4X8C2ceFkaLExmEQukg/viewform?usp=sharing&ouid=103979447744273921797', '_blank');">
          üìù Calculator Feedback
        </button>
      </div>
    </div>
  `;

  // Scroll to the timeline breakdown after generating it
  breakdownDiv.scrollIntoView({ behavior: "smooth", block: "start" });

  // Add PDF download logic
  setTimeout(() => {
    const btn = document.getElementById('download-timeline-btn');
    if (btn) {
      btn.onclick = function() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({
          orientation: "p",
          unit: "pt",
          format: "a4"
        });

        // Get the timeline HTML and convert to plain text for PDF
        const timelineHtml = breakdownDiv.querySelector('ol').innerHTML;
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = timelineHtml;
        const stepsText = Array.from(tempDiv.querySelectorAll('li')).map(li => li.innerText);

        doc.setFont("helvetica", "bold");
        doc.setFontSize(18);
        doc.text("Step-by-Step Timeline", 40, 50);

        doc.setFont("helvetica", "normal");
        doc.setFontSize(12);

        const pageHeight = doc.internal.pageSize.height;
        const margin = 40;
        let y = 80;
        const lineHeight = 18;

        stepsText.forEach((step, idx) => {
          // Split long steps into lines that fit the page width
          const lines = doc.splitTextToSize(step, 500);
          lines.forEach((line, i) => {
            if (y > pageHeight - margin) {
              doc.addPage();
              y = margin;
            }
            doc.text(line, margin, y);
            y += lineHeight;
          });
          y += 6; // Extra space between steps
        });

        doc.save("assignment-timeline.pdf");
      };
    }

    // Add feedback button logic
    const feedbackBtn = document.getElementById('feedback-btn');
    if (feedbackBtn) {
      feedbackBtn.onclick = function() {
        window.open('https://docs.google.com/forms/d/e/1FAIpQLScGjoCU9KW7aR4jlmjI10SKbpqavCE4X8C2ceFkaLExmEQukg/viewform?usp=sharing&ouid=103979447744273921797', '_blank');
      };
    }
  }, 0);
});
</script>
<script>
  document.getElementById('assignment-form').addEventListener('input', function() {
  document.getElementById('timeline-breakdown').innerHTML = '';
});
</script>
</html>